# å¿«é€Ÿä¿®å¤å‚è€ƒ - ç«‹å³å¯ç”¨çš„JSONä¿®æ”¹ç¤ºä¾‹

## ğŸ¯ æœ¬æ–‡ä»¶åŒ…å«: å¯ä»¥ç›´æ¥å¤åˆ¶ç²˜è´´ä½¿ç”¨çš„JSONä¿®æ”¹ä»£ç 

---

## âš¡ ç´§æ€¥ä¿®å¤1: MuzzleDeviceTemplates.json

### é—®é¢˜: è´å¶ç‰¹æ•°å€¼è¿‡åº¦æƒ©ç½š

### ä¿®å¤ä»£ç  (æŸ¥æ‰¾å¹¶æ›¿æ¢)

#### M1 Garand åˆºåˆ€ä¿®å¤
```json
// ===== æŸ¥æ‰¾è¿™ä¸ª =====
"6783afddef9d6f5d579c43f1": {
    "$type": "RealismMod.WeaponMod, RealismMod",
    "ItemID": "6783afddef9d6f5d579c43f1",
    "Name": "mosin_bayonet",
    "ModType": "bayonet",
    "VerticalRecoil": 5,
    "HorizontalRecoil": 0,
    "Dispersion": 5,
    "CameraRecoil": -1,
    "AutoROF": 0,
    "SemiROF": 0,
    "ModMalfunctionChance": 0,
    "CanCycleSubs": false,
    "Accuracy": -12,
    "HeatFactor": 1.5,
    "CoolFactor": 0,
    "DurabilityBurnModificator": 0,
    "Velocity": 0,
    "RecoilAngle": 3,
    "ConflictingItems": [],
    "Ergonomics": -5,
    "Weight": 0.5,
    "Loudness": 0,
    "Convergence": 5,
    "LoyaltyLevel": 1,
    "MeleeDamage": 112,
    "MeleePen": 40
}

// ===== æ›¿æ¢ä¸ºè¿™ä¸ª =====
"6783afddef9d6f5d579c43f1": {
    "$type": "RealismMod.WeaponMod, RealismMod",
    "ItemID": "6783afddef9d6f5d579c43f1",
    "Name": "mosin_bayonet",
    "ModType": "bayonet",
    "VerticalRecoil": 1,
    "HorizontalRecoil": 0,
    "Dispersion": 2,
    "CameraRecoil": 0,
    "AutoROF": 0,
    "SemiROF": 0,
    "ModMalfunctionChance": 0,
    "CanCycleSubs": false,
    "Accuracy": -3,
    "HeatFactor": 1.5,
    "CoolFactor": 0,
    "DurabilityBurnModificator": 0,
    "Velocity": 0,
    "RecoilAngle": 1,
    "ConflictingItems": [],
    "Ergonomics": -2,
    "Weight": 0.5,
    "Loudness": 0,
    "Convergence": 5,
    "LoyaltyLevel": 1,
    "MeleeDamage": 112,
    "MeleePen": 40
}
```

#### M9 åˆºåˆ€ä¿®å¤
```json
// ===== æŸ¥æ‰¾è¿™ä¸ª =====
"6783b041281387d669fd3722": {
    "$type": "RealismMod.WeaponMod, RealismMod",
    "ItemID": "6783b041281387d669fd3722",
    "Name": "m9_bayonet",
    "ModType": "bayonet",
    "VerticalRecoil": 5,
    "HorizontalRecoil": 0,
    "Dispersion": 5,
    "CameraRecoil": -1,
    "AutoROF": 0,
    "SemiROF": 0,
    "ModMalfunctionChance": 0,
    "CanCycleSubs": false,
    "Accuracy": -12,
    "HeatFactor": 1,
    "CoolFactor": 0,
    "DurabilityBurnModificator": 0,
    "Velocity": 0,
    "RecoilAngle": 3,
    "ConflictingItems": [],
    "Ergonomics": -10,
    "Weight": 0.35,
    "Loudness": 0,
    "Convergence": 5,
    "LoyaltyLevel": 1,
    "MeleeDamage": 60,
    "MeleePen": 25
}

// ===== æ›¿æ¢ä¸ºè¿™ä¸ª =====
"6783b041281387d669fd3722": {
    "$type": "RealismMod.WeaponMod, RealismMod",
    "ItemID": "6783b041281387d669fd3722",
    "Name": "m9_bayonet",
    "ModType": "bayonet",
    "VerticalRecoil": 1,
    "HorizontalRecoil": 0,
    "Dispersion": 2,
    "CameraRecoil": 0,
    "AutoROF": 0,
    "SemiROF": 0,
    "ModMalfunctionChance": 0,
    "CanCycleSubs": false,
    "Accuracy": -2,
    "HeatFactor": 1,
    "CoolFactor": 0,
    "DurabilityBurnModificator": 0,
    "Velocity": 0,
    "RecoilAngle": 0,
    "ConflictingItems": [],
    "Ergonomics": -3,
    "Weight": 0.35,
    "Loudness": 0,
    "Convergence": 5,
    "LoyaltyLevel": 1,
    "MeleeDamage": 60,
    "MeleePen": 25
}
```

---

## âš¡ ç´§æ€¥ä¿®å¤2: Flashå€¼æ ‡å‡†åŒ–

### é—®é¢˜: æŸäº›æ¶ˆç„°å™¨å’Œæ¶ˆéŸ³å™¨çš„Flashå€¼ä¸ºæ­£æ•°ï¼ˆ+30ï¼‰

### ä¿®å¤è§„åˆ™
```
âœ“ æ¶ˆç„°å™¨åº”è¯¥æœ‰: Flash: -10 åˆ° -30
âœ“ æ¶ˆéŸ³å™¨åº”è¯¥æœ‰: Flash: -20 åˆ° -40
âœ— ä»»ä½• Flash: +30 éƒ½åº”è¯¥æ”¹ä¸º Flash: -30
```

### æ‰¾åˆ°ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„æ‰€æœ‰é—®é¢˜
**åœ¨JSONç¼–è¾‘å™¨ä¸­æœç´¢**: `"Flash": 3` æˆ– `"Flash": 30`

ç„¶åå°†å…¶æ”¹ä¸ºè´Ÿæ•°ï¼š
```json
// ç¤ºä¾‹
"Flash": 30   â†’   "Flash": -30
"Flash": 3    â†’   "Flash": -3
```

---

## âš¡ ç´§æ€¥ä¿®å¤3: åˆ é™¤æªç®¡ä¸­çš„SemiROFè´Ÿæ•°

### é—®é¢˜: BarrelTemplates.json ä¸­æœ‰å¾ˆå¤š `"SemiROF": -1.7` è¿™æ ·çš„è´Ÿæ•°

### æŸ¥æ‰¾æ¨¡å¼
```
æœç´¢: "SemiROF": -
æ›¿æ¢ä¸º: (åˆ é™¤è¿™æ•´è¡Œ)
```

### éœ€è¦å¤„ç†çš„ç¤ºä¾‹

#### é—®é¢˜1: æœç´¢æ‰€æœ‰è´Ÿæ•°SemiROF
```javascript
// è¿™äº›éƒ½éœ€è¦åˆ é™¤æˆ–æ”¹ä¸º0
"SemiROF": -1.7,
"SemiROF": -1,
"SemiROF": -1.25,
"SemiROF": -1.5,
"SemiROF": -0.5,
"SemiROF": -0.75,
"SemiROF": -1.2,
"SemiROF": -4,
"SemiROF": -3,
"SemiROF": -2,
```

#### æ¨èåšæ³•: å®Œå…¨åˆ é™¤è¿™ä¸ªå­—æ®µ
```json
// BEFORE (é”™è¯¯)
"BarrelTemplates.json" ä¸­çš„æŸä¸ªæªç®¡:
{
    "Name": "some_barrel",
    "VerticalRecoil": -1,
    "SemiROF": -1.7,    // âŒ åˆ é™¤è¿™è¡Œ
    "ModMalfunctionChance": 0
}

// AFTER (æ­£ç¡®)
{
    "Name": "some_barrel", 
    "VerticalRecoil": -1,
    // SemiROF å­—æ®µå®Œå…¨åˆ é™¤
    "ModMalfunctionChance": 0
}
```

---

## ğŸ“ æ­¥éª¤å¼ä¿®å¤æŒ‡å—

### æ­¥éª¤1: åœ¨VS Codeæˆ–ç±»ä¼¼ç¼–è¾‘å™¨ä¸­æ‰“å¼€MuzzleDeviceTemplates.json

### æ­¥éª¤2: ä½¿ç”¨æŸ¥æ‰¾å’Œæ›¿æ¢ï¼ˆCtrl+Hï¼‰

#### æ›¿æ¢æ‰€æœ‰ Flash: æ­£æ•° ä¸ºè´Ÿæ•°
```
æŸ¥æ‰¾: "Flash": (\d+)
æ›¿æ¢ä¸º: "Flash": -$1

å‹¾é€‰"ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼"
```

#### åˆ é™¤æ‰€æœ‰è´Ÿæ•°SemiROFï¼ˆæªç®¡æ–‡ä»¶ä¸­ï¼‰
```
æŸ¥æ‰¾: ,\s*"SemiROF": -[0-9.]+
æ›¿æ¢ä¸º: (ç•™ç™½)

å‹¾é€‰"ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼"
```

### æ­¥éª¤3: ä½¿ç”¨JSONéªŒè¯å·¥å…·éªŒè¯æ ¼å¼
```
åœ¨çº¿å·¥å…·: jsonlint.com
æˆ–ä½¿ç”¨: VS Code çš„ JSON éªŒè¯
```

### æ­¥éª¤4: ä¿å­˜æ–‡ä»¶

---

## ğŸ”„ æ‰¹é‡ä¿®å¤è„šæœ¬å‚è€ƒ

### ä½¿ç”¨Pythonè¿›è¡Œæ‰¹é‡ä¿®æ”¹

```python
import json

# ä¿®å¤MuzzleDeviceTemplates.json
with open('MuzzleDeviceTemplates.json', 'r', encoding='utf-8') as f:
    data = json.load(f)

for item_id, item_data in data.items():
    # ä¿®å¤1: è´å¶ç‰¹æ•°å€¼
    if 'bayonet' in item_data.get('Name', '').lower():
        if item_data.get('VerticalRecoil', 0) > 3:
            item_data['VerticalRecoil'] = 1
        if item_data.get('Accuracy', 0) < -5:
            item_data['Accuracy'] = -3
        if item_data.get('Ergonomics', 0) < -3:
            item_data['Ergonomics'] = -2
    
    # ä¿®å¤2: Flashå€¼æ ‡å‡†åŒ–  
    if 'Flash' in item_data and item_data['Flash'] > 0:
        item_data['Flash'] = -item_data['Flash']
    
    # ä¿®å¤3: ç§»é™¤SemiROFè´Ÿæ•°
    if 'SemiROF' in item_data and item_data['SemiROF'] < 0:
        del item_data['SemiROF']

# ä¿å­˜ä¿®æ”¹
with open('MuzzleDeviceTemplates.json', 'w', encoding='utf-8') as f:
    json.dump(data, f, indent=4, ensure_ascii=False)

print("ä¿®å¤å®Œæˆ!")
```

---

## ğŸ“‹ ä¿®å¤éªŒè¯æ¸…å•

ä¿®æ”¹åæ£€æŸ¥ä»¥ä¸‹å†…å®¹:

- [ ] æ‰€æœ‰ç¬¬äºŒå¤§æ‹¬å·é—­åˆæ­£ç¡®
- [ ] æ²¡æœ‰å°¾éƒ¨å¤šä½™çš„é€—å·
- [ ] æ‰€æœ‰å­—ç¬¦ä¸²ç”¨åŒå¼•å·å¼•èµ·
- [ ] VerticalRecoil åœ¨ -20 ~ +5 èŒƒå›´
- [ ] è´å¶ç‰¹ Accuracy åœ¨ -5 ~ 0 èŒƒå›´
- [ ] æ‰€æœ‰ Flash å€¼éƒ½æ˜¯è´Ÿæ•°æˆ–0
- [ ] JSON æ ¼å¼éªŒè¯é€šè¿‡
- [ ] æ¸¸æˆå†…æˆåŠŸåŠ è½½é…ç½®

---

## âš ï¸ å¤‡ä»½å’Œå›æ»š

### ä¿®æ”¹å‰å¿…é¡»å¤‡ä»½
```
1. å¤åˆ¶æ•´ä¸ª attatchments æ–‡ä»¶å¤¹
   â†’ åˆ›å»º attatchments_backup æ–‡ä»¶å¤¹
   â†’ å°†æ‰€æœ‰JSONæ–‡ä»¶å¤åˆ¶åˆ°å¤‡ä»½æ–‡ä»¶å¤¹

2. ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶
   â†’ å¦‚æœä½¿ç”¨Git: git commit -m "backup before fix"
```

### å¦‚æœå‡ºç°é—®é¢˜éœ€è¦å›æ»š
```
1. åˆ é™¤æœ‰é—®é¢˜çš„JSONæ–‡ä»¶
2. ä»å¤‡ä»½å¤åˆ¶ç›¸åº”çš„æ–‡ä»¶å›æ¥
3. é‡å¯æ¸¸æˆ
```

---

## ğŸ§ª ä¿®æ”¹åçš„æµ‹è¯•æ­¥éª¤

### æµ‹è¯•1: JSONæ ¼å¼éªŒè¯
```
å³é”®ç‚¹å‡»JSONæ–‡ä»¶ â†’ ç”¨VS Codeæ‰“å¼€
æ£€æŸ¥æ˜¯å¦æœ‰çº¢è‰²æ³¢æµªçº¿ï¼ˆé”™è¯¯ä¸‹åˆ’çº¿ï¼‰
```

### æµ‹è¯•2: æ¸¸æˆåŠ è½½æµ‹è¯•
```
1. å¯åŠ¨æ¸¸æˆ
2. è¿›å…¥è£…å¤‡ç•Œé¢
3. å°è¯•è£…å¤‡ç›¸å…³é…ä»¶
4. æ£€æŸ¥å‚æ•°æ˜¾ç¤ºæ˜¯å¦æ­£ç¡®
```

### æµ‹è¯•3: åŠŸèƒ½æµ‹è¯•
```
1. è£…å¤‡ä¸€æŠŠå¸¦è´å¶ç‰¹çš„æ­¥æªï¼ˆå¦‚Mosinï¼‰
2. æ£€æŸ¥åååŠ›ã€ç²¾åº¦ã€äººä½“å·¥ç¨‹å­¦ä¿®æ­£æ˜¯å¦åˆç†
3. å°è¯•ä½¿ç”¨å„ç§æ¶ˆç„°å™¨/æ¶ˆéŸ³å™¨
4. æ£€æŸ¥é—ªå…‰å€¼æ˜¯å¦åˆç†æ˜¾ç¤º
```

---

## ğŸ’¡ å¸¸è§é—®é¢˜è§£å†³

### é—®é¢˜1: ä¿®æ”¹åæ¸¸æˆå´©æºƒ
```
åŸå› : JSONæ ¼å¼æœ‰è¯¯
è§£å†³: 
1. æ£€æŸ¥æ˜¯å¦æœ‰ç¼ºå¤±çš„é€—å·æˆ–å¼•å·
2. ä½¿ç”¨JSONéªŒè¯å·¥å…·
3. å¯¹æ¯”åŸæ–‡ä»¶æ‰¾å‡ºå·®å¼‚
```

### é—®é¢˜2: ä¿®æ”¹æ²¡æœ‰ç”Ÿæ•ˆ
```
åŸå› : æ¸¸æˆç¼“å­˜æˆ–æœªé‡å¯
è§£å†³:
1. å®Œå…¨å…³é—­æ¸¸æˆ
2. æ¸…é™¤æ¸¸æˆç¼“å­˜æ–‡ä»¶
3. é‡æ–°å¯åŠ¨æ¸¸æˆ
4. è¿›å…¥è£…å¤‡ç•Œé¢æ£€æŸ¥
```

### é—®é¢˜3: æŸäº›é…ä»¶æ¶ˆå¤±
```
åŸå› : ItemID å¯èƒ½è¢«ä¿®æ”¹äº†
è§£å†³:
1. æ£€æŸ¥ ItemID æ˜¯å¦ä¿æŒä¸å˜
2. ä½¿ç”¨æœç´¢å·¥å…·æ‰¾åˆ°è¯¥ItemID
3. æ¢å¤åˆ°æ­£ç¡®çš„ItemID
```

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

æ£€æŸ¥æ¸…å•:
- [ ] å¤‡ä»½å·²åˆ›å»º
- [ ] JSON æ ¼å¼æœ‰æ•ˆ
- [ ] ItemID ä¿æŒä¸å˜
- [ ] æ‰€æœ‰ä¿®æ”¹éƒ½æœ‰å¯¹åº”çš„"æ”¹å‰/æ”¹å"è®°å½•
- [ ] æ¸¸æˆé‡å¯åå†æµ‹è¯•

---

*å¿«é€Ÿå‚è€ƒç‰ˆæœ¬: 1.0*
*é€‚ç”¨æ—¥æœŸ: 2026-02-08*
